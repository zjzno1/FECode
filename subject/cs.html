<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <button class="a" onclick="aa()">aaaaa</button>
</body>

</html>
<!-- <script>
    let arr = [1, 4, 2, 6, 8, 31, 9, 2, 7, 0, 5, 2];

    // arr.sort((a, b) => a - b);

    // 快速排序
    // function quickSort(arr, left, right) {
    //     if (left > right) return;
    //     let tmp = arr[left];
    //     let i = left;
    //     let j = right;
    //     let t;
    //     while (i != j) {
    //         while (arr[j] > tmp && i < j) {
    //             j--;
    //         }
    //         while (arr[i] < tmp && i < j) {
    //             i++;
    //         }
    //         if (i < j) {
    //             t = arr[i];
    //             arr[i] = arr[j];
    //             arr[j] = t;
    //         }
    //     }
    //     arr[left] = arr[i];
    //     arr[i] = tmp;
    //     quickSort(arr, left, i - 1);
    //     quickSort(arr, i + 1, right);
    //     console.log(arr);
    // }

    // quickSort(arr, 1, arr.length - 1);

    // 错误版快排
    // var quickSort = function (arr) {
    //         // 数组长度小于等于1，直接返回，不用排序
    //         if (arr.length <= 1) { return arr; }
    //         // 选择一个基准数
    //         var pivotIndex = Math.floor(arr.length / 2);
    //         //取出基准数
    //         var pivot = arr.splice(pivotIndex, 1)[0];
    //         // 设置左右两个数组
    //         var left = [];
    //         var right = [];
    //         // 比基准书小的放左边，比基准书大的放右边
    //         for (var i = 0; i < arr.length; i++) {
    //             if (arr[i] < pivot) {
    //                 left.push(arr[i]);
    //             } else {
    //                 right.push(arr[i]);
    //             }
    //         }
    //         // 递归得出排序结果
    //         return quickSort(left).concat([pivot], quickSort(right));
    //     };
    //     console.log(quickSort(arr));

    // 堆排序

</script> -->
<!-- 
<script>
    // var a = [1, 4, 2, 6, 8, 31, 9, 2, 7, 0, 5, 2];
    function quicksort(a, left, right) {
        let i, j, t, temp;
        if (left > right)
            return a;
        temp = a[left]; //temp中存的就是基准数 
        i=left;
        j = right;
        while (i < j) {
            //顺序很重要，要先从右往左找 
            while(a[j]>=temp && i<j)
                j--; //再从左往右找
            while (a[i] <= temp && i < j)
                i++;
            //交换两个数在数组中的位置
            if (i < j)//当哨兵i和哨兵j没有相遇时 
            {
                t = a[i];
                a[i] = a[j];
                a[j] = t;
            }
        }
        //最终将基准数归位
        a[left] = a[i];
        a[i] = temp;
        
        quicksort(a, left, i - 1);//继续处理左边的，这里是一个递归的过程
        quicksort(a, i + 1, right);//继续处理右边的，这里是一个递归的过程
    }
    
    function aa(params) {
        // let a = [3, 1, 2];
        var a = [1, 4, 2, 6, 8, 31, 9, 2, 7, 0, 5, 2];
        quicksort(a, 0, a.length - 1);
        console.log(a);
    }
</script> -->

<script>
    function jsonp(options) {
        try {
            // 设置默认初始值
            var defaultObj = {
                url: '',
                jsonpCallback: 'jsonpCallback',
                data: {},
                success: function (data) { }
            }
            // 传入参数的拼接
            var dataStr = '';
            // 合并传入新值
            for (var attr in options) {
                defaultObj[attr] = options[attr];
            }
            // 拼接传入的参数
            for (var key in defaultObj.data) {
                dataStr += 'key=' + defaultObj.data[key] + '&';
            }
            window[defaultObj.jsonpCallback] = function (data) {
                defaultObj.success(data);
            }
            // 生成script，回调执行callback
            var script = document.createElement('script');
            script.src = defaultObj.url + '?' + dataStr + '&' + defaultObj.jsonpCallback + '=' + defaultObj.jsonpCallback;
            // 获取head元素，把生成的script标签放到script后面
            var head = document.getElementsByTagName('head')[0];
            head.appendChild(script);
            script.onload = function () {
                delete window[defaultObj.jsonpCallback];
            }
        } catch (e) {

        }
    }
    jsonp({
        url: 'http://libpre.cnsuning.com/api/jsonp/snjw.jsonp',
        jsonpCallback: 'cmsCallback',
        data: {
            a: 1,
            b: 2
        },
        success: function (data) {
            console.log(112233, data);
            setTimeout(() => {
                console.log(data);
            }, 1000);
        }
    })

</script>